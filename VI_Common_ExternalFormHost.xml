<WebDesigner><Context ID="VI_Common_ExternalFormHost" MetamodelVersion="2016-05-08" MigrationNotes="DMLREPLACE;" HelpChapterUid="" AllowUrlNavigation="true" ScriptItemUID="Context1"><ContextConfiguration><CompilationSettings ScriptItemUID="CompilationSettings1" /><ContextParameters ScriptItemUID="ContextParameters1"><Parameter Name="URL" Comment="For security reasons, this parameter cannot have an arbitrary URL. The value can be either:&#13;&#10;- a UID of a RelatedApplication&#13;&#10;- &quot;QPM1&quot;, &quot;QPM2&quot; or &quot;QPM3&quot;&#13;&#10;&#13;&#10;If you need the ability to pass arbitrary URLs, do not this module. Use the QBM_Common_ExternalFormHost form component instead." /><Parameter Name="DisplayName" /><Parameter Name="HeadingName" IsMandatory="false" /></ContextParameters></ContextConfiguration><Tables ScriptItemUID="Tables1" /><Controls ScriptItemUID="Controls1" /><Functions ScriptItemUID="Functions1"><Function ScriptItemUID="Function1" Name="GetTargetUrl(string input)" DataType="System.String" Expression="{{&#13;&#10;string url = null;&#13;&#10;var relatedApp = _UserSession.SessionModule.TableStore.GetTable(&quot;UserRelatedApplication&quot;).GetRowForPrimaryKey(input);&#13;&#10;if (relatedApp != null)&#13;&#10;   url = relatedApp.GetValue(&quot;URL&quot;).String;&#13;&#10;&#13;&#10;if (input == &quot;QPM1&quot;)&#13;&#10;   url = GetQPM1();&#13;&#10;else if (input == &quot;QPM2&quot;)&#13;&#10;   url = GetQPM2();&#13;&#10;else if (input == &quot;QPM3&quot;)&#13;&#10;   url = GetQPM3();&#13;&#10;   &#13;&#10;if (url == null)&#13;&#10;   Logger.Info(&quot;Ignoring unknown URL input: &quot;+input);&#13;&#10;   &#13;&#10;VI.WebRuntime.RuntimeUtil.CheckIsValidUrlForRedirect(url);&#13;&#10;@return url;&#13;&#10;}}" /><Function ScriptItemUID="Function2" Name="GetQPM1()" DataType="System.String" Expression="if isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_Version&quot;), &quot;true&quot;)=&quot;true&quot;&#13;&#10;then&#13;&#10;(&#13;&#10;Format(&quot;{4}/EntryPoint/?ActionName=ChangePassword&amp;IdentificationDomain={3}&amp;IdentificationAccount={0}&amp;CurrentLanguage={1}&amp;Integrated=Yes&quot;,&#13;&#10;&#09;from User select CentralAccount,&#09;&#13;&#10;&#09;getCulture(),&#13;&#10;&#09;urlencode(isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_PortalLink&quot;), GetConfigParm('QER\WebPortal\BaseURL'))),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_IdentificationDomain&quot;),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_BaseURL&quot;),&#13;&#10;&#09;)&#13;&#10;)&#13;&#10;else&#13;&#10;(&#13;&#10;Format(&quot;{4}/user/EntryPoint?ActionName=ChangePassword&amp;IdentificationDomain={3}&amp;IdentificationAccount={0}&amp;CurrentLanguage={1}&amp;PortalHomePage={2}&amp;GUILayout=Integrated&quot;,&#13;&#10;&#09;from User select CentralAccount,&#13;&#10;&#09;getCulture(),&#13;&#10;&#09;urlencode(isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_PortalLink&quot;), GetConfigParm('QER\WebPortal'))),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_IdentificationDomain&quot;),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_BaseURL&quot;),&#13;&#10;&#09;)&#13;&#10;)" /><Function ScriptItemUID="Function3" Name="GetQPM2()" DataType="System.String" Expression="if isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_Version&quot;), &quot;true&quot;)=&quot;true&quot;&#13;&#10;then&#13;&#10;(&#13;&#10;Format(&quot;{4}/EntryPoint/?ActionName=SetQAProfile&amp;IdentificationDomain={3}&amp;IdentificationAccount={0}&amp;CurrentLanguage={1}&amp;Integrated=Yes&quot;,&#13;&#10;&#09;from User select CentralAccount,&#13;&#10;&#09;getCulture(),&#13;&#10;&#09;urlencode(isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_PortalLink&quot;), GetConfigParm('QER\WebPortal\BaseURL'))),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_IdentificationDomain&quot;),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_BaseURL&quot;),&#13;&#10;&#09;)&#09;&#09;&#13;&#10;)&#13;&#10;else&#13;&#10;(&#13;&#10;Format(&quot;{4}/user/EntryPoint?ActionName=SetQAProfile&amp;IdentificationDomain={3}&amp;IdentificationAccount={0}&amp;CurrentLanguage={1}&amp;PortalHomePage={2}&amp;GUILayout=Integrated&quot;,&#13;&#10;&#09;from User select CentralAccount,&#13;&#10;&#09;getCulture(),&#13;&#10;&#09;urlencode(isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_PortalLink&quot;), GetConfigParm('QER\WebPortal'))),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_IdentificationDomain&quot;),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_BaseURL&quot;),&#13;&#10;&#09;)&#13;&#10;)" /><Function ScriptItemUID="Function4" Name="GetQPM3()" DataType="System.String" Expression="if isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_Version&quot;), &quot;true&quot;)=&quot;true&quot;&#13;&#10;then&#13;&#10;(&#13;&#10;Format(&quot;{4}/EntryPoint/?ActionName=ChangeSettings&amp;IdentificationDomain={3}&amp;IdentificationAccount={0}&amp;CurrentLanguage={1}&amp;Integrated=Yes&quot;,&#13;&#10;&#09;from User select CentralAccount,&#13;&#10;&#09;getCulture(),&#13;&#10;&#09;urlencode(isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_PortalLink&quot;), GetConfigParm('QER\WebPortal\BaseURL'))),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_IdentificationDomain&quot;),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_BaseURL&quot;),&#13;&#10;&#09;)&#13;&#10;)&#13;&#10;else&#13;&#10;(&#13;&#10;Format(&quot;{4}/user/EntryPoint?ActionName=ChangeSettings&amp;IdentificationDomain={3}&amp;IdentificationAccount={0}&amp;CurrentLanguage={1}&amp;PortalHomePage={2}&amp;GUILayout=Integrated&quot;,&#13;&#10;&#09;from User select CentralAccount,&#13;&#10;&#09;getCulture(),&#13;&#10;&#09;urlencode(isnull(getconfig(&quot;VI_MyData_MyPassword_QPM_PortalLink&quot;), GetConfigParm('QER\WebPortal'))),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_IdentificationDomain&quot;),&#13;&#10;&#09;getconfig(&quot;VI_MyData_MyPassword_QPM_BaseURL&quot;),&#13;&#10;&#09;)&#13;&#10;)" /><Function ScriptItemUID="Function5" Name="getCulture()" DataType="System.String" Expression="if ( ( 1 &lt; IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;[&quot;,0 ) ) &#13;&#10; AND ( 1 &lt; IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;-&quot;,IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;[&quot;,0 ) ) ) )&#13;&#10;        then Substring ( from user select DisplayValue( UID_DialogCulture ), &#13;&#10;&#09;&#09;                 IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;[&quot;,0 ) + 1,  &#13;&#10;&#09;&#09;&#09;&#09;&#09;&#09; IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;-&quot;,IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;[&quot;,0 ) ) &#13;&#10;&#09;&#09;&#09;&#09;&#09;&#09; -IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;[&quot;,0 ) - 1 )&#13;&#10;else if ( ( 1 &lt; IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;[&quot;,0 ) ) &#13;&#10;&#09;  AND ( 1 &lt; IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;]&quot;,0 ) ) )&#13;&#10;      then  Substring ( from user select DisplayValue( UID_DialogCulture ), &#13;&#10;&#09;                    IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;[&quot;,0 ) + 1,  &#13;&#10;&#09;&#09;&#09;&#09;&#09;&#09;IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;]&quot;,0 ) &#13;&#10;&#09;&#09;&#09;&#09;&#09;&#09;-IndexOf( from user select DisplayValue( UID_DialogCulture ),&quot;[&quot;,0 ) - 1 )&#13;&#10;else if (1 &lt; indexof(variable(&quot;%currentculture%&quot;), &quot;-&quot;, 0))&#13;&#10;      then (substring(variable(&quot;%currentculture%&quot;), 0, indexof(variable(&quot;%currentculture%&quot;), &quot;-&quot;, 0)))&#13;&#10;else &quot;en&quot;" /></Functions><DataEventHandlers ScriptItemUID="DataEventHandlers1" /><ActionSequence ScriptItemUID="Action1" /><Forms ScriptItemUID="Forms1"><Form ID="Form" NavigationTitle="isnullorempty(request(&quot;HeadingName&quot;),request(&quot;DisplayName&quot;))" ScriptItemUID="Form1"><ActionSequence ScriptItemUID="Action2" /><PagePartContainer ID="Main" ScriptItemUID="PagePartContainer1"><Container EnableCustomAttributes="true" ScriptItemUID="Container1"><HtmlAttributes><HtmlAttribute Name="'style'" ScriptItemUID="style" Value="'position: absolute; left: 0; right: 0; top: 0; bottom: 0;'" /></HtmlAttributes><IFrame URL="GetTargetUrl(request(&quot;URL&quot;))" IsAutoSize="true" ScriptItemUID="IFrame1" /></Container></PagePartContainer></Form></Forms></Context></WebDesigner>